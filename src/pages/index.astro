---
import boxers from '../boxers.json'
import Header from './components/Header.astro'
import './styles/global.astro'
---

<html lang='es'>
	<head>
		<meta charset='utf-8' />
		<link rel='icon' type='image/svg+xml' href='/favicon.svg' />
		<meta name='viewport' content='width=device-width' />
		<link
			rel='preload'
			href='/boxers/coscu.webp'
			as='image'
			type='image/webp'
			fetchpriority='high'
		/>
		<link
			rel='preload'
			href='/boxers/german.webp'
			as='image'
			type='image/webp'
			fetchpriority='high'
		/>
		<link
			rel='preload'
			href='/logo.webp'
			as='image'
			type='image/webp'
			fetchpriority='high'
		/>
		<title>La Velada del Año - Proyecto de ejercicio</title>
	</head>
	<body>
		<Header />
		<main class='relative'>
			<section
				id='boxers'
				class={`flex justify-between relative
					[&>div>img]:absolute [&>div>img]:bottom-0 [&>div>img]:w-auto
					[&>div>img]:animate-ease-in-out [&>div>img]:animate-duration-700
					h-[40vh] md:h-[65vh] lg:h-screen pt-4 lg:pt-24 border-b border-white/10 overflow-hidden
				`}
			>
				<div
					class='absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-[#131313] via-zinc-900 to-zinc-950'
				>
				</div>
				<!-- Vertical lines -->
				<div
					class='absolute inset-0 flex gap-x-3 left-1/2 -translate-x-1/2 justify-center opacity-20 blur-sm'
				>
					<div
						class='w-2 drop-shadow-lg h-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-purple-100 via-purple-300 to-purple-500'
					>
					</div>
					<div
						class='w-2 drop-shadow-lg h-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-purple-100 via-purple-300 to-purple-500'
					>
					</div>
					<div
						class='w-2 drop-shadow-lg h-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-purple-100 via-purple-300 to-purple-500'
					>
					</div>
				</div>
				<!-- Left Boxers -->
				<div class='relative w-full'>
					<img
						class='left-0 h-full z-50'
						srcset='/boxers/coscu-mobile.webp 767w, /boxers/coscu.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Coscu'
						style={boxers.coscu.clip}
						fetchpriority='high'
					/>
					<img
						class='left-[5%] h-[80%] z-40 animate-fade-right'
						srcset='/boxers/mayichi-mobile.webp 767w, /boxers/mayichi.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Mayichi'
						style={boxers.mayichi.clip}
					/>
					<img
						class='left-[15%] h-[75%] z-30 animate-fade-right animate-delay-300'
						srcset='/boxers/viruzz-mobile.webp 767w, /boxers/viruzz.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Viruzz'
						style={boxers.viruzz.clip}
					/>
					<img
						class='left-[30%] h-[70%] z-20 animate-fade-right animate-delay-500'
						srcset='/boxers/fernanfloo-mobile.webp 767w, /boxers/fernanfloo.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Fernanfloo'
						style={boxers.fernanfloo.clip}
					/>
					<img
						class='left-[42%] h-[68%] z-10 animate-fade-right animate-delay-700'
						srcset='/boxers/la-rivers-mobile.webp 767w, /boxers/la-rivers.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='La Rivers'
						style={boxers['la-rivers'].clip}
					/>
					<img
						class='left-[46%] h-[63%] z-0 animate-fade-right animate-delay-1000'
						srcset='/boxers/papigavi-mobile.webp 767w, /boxers/papigavi.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Papigavi'
						style={boxers.papigavi.clip}
						fetchpriority='low'
					/>
				</div>
				<!-- Right boxers -->
				<div class='relative w-full'>
					<img
						class='right-0 h-full z-50'
						srcset='/boxers/german-mobile.webp 767w, /boxers/german.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Germán'
						style={boxers.german.clip}
						fetchpriority='high'
					/>
					<img
						class='right-[5%] h-[80%] z-40 animate-fade-left'
						srcset='/boxers/amouranth-mobile.webp 767w, /boxers/amouranth.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Amouranth'
						style={boxers.amouranth.clip}
					/>
					<img
						class='right-[15%] h-[75%] z-30 animate-fade-left animate-delay-300'
						srcset='/boxers/shelao-mobile.webp 767w, /boxers/shelao.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Shelao'
						style={boxers.shelao.clip}
					/>
					<img
						class='right-[30%] h-[70%] z-20 animate-fade-left animate-delay-500'
						srcset='/boxers/luzu-mobile.webp 767w, /boxers/luzu.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Luzu'
						style={boxers.luzu.clip}
					/>
					<img
						class='right-[42%] h-[68%] z-10 animate-fade-left animate-delay-700'
						srcset='/boxers/rivers-mobile.webp 767w, /boxers/rivers.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Rivers'
						style={boxers.rivers.clip}
					/>
					<img
						class='right-[46%] h-[63%] z-0 animate-fade-left animate-delay-1000'
						srcset='/boxers/ampeter-mobile.webp 767w, /boxers/ampeter.webp'
						sizes='(max-width: 767px) 767px, 100vw'
						alt='Ampeter'
						style={boxers.ampeter.clip}
						fetchpriority='low'
					/>
				</div>
			</section>
			<!-- Info -->
			<div
				id='info'
				class='block lg:absolute lg:bottom-48 z-50 mx-auto lg:left-1/2 lg:-translate-x-1/2'
			>
				<div class='flex flex-col'>
					<!-- Fecha -->
					<div class='px-5 pt-5 pb-2 bg-white text-black text-center'>
						<h2 class='font-boxing uppercase text-7xl'>1 de JULIO</h2>
					</div>
					<!-- Twitch -->
					<div class='px-5 pt-2 pb-1 bg-black text-white text-center'>
						<a
							class='font-boxing uppercase text-[46px] inline-block hover:contrast-150 hover:scale-105 transition'
							href='https://twitch.tv/ibai'
							target='_blank'
							rel='noopener noreferrer'
						>
							<span class='text-purple-200'>twitch.tv/</span>
							<span class='text-purple-600'>ibai</span></a
						>
					</div>
					<!-- Tickets -->
					<div class='px-5 pt-2 pb-1 bg-sky-600 text-white text-center'>
						<a
							class='font-boxing uppercase text-4xl inline-block hover:contrast-150 hover:scale-105 transition'
							href='https://twitch.tv/ibai'
							target='_blank'
							rel='noopener noreferrer'>Comprar Entradas</a
						>
					</div>
				</div>
			</div>
			<!-- Combats -->
			<div
				id='combat'
				class='absolute bottom-48 z-50 mx-auto left-1/2 -translate-x-1/2 flex justify-center flex-col gap-y-0 opacity-0 invisible'
			>
				<div class='px-5 pt-4 pb-2 bg-black text-white text-center'>
					<h3 class='font-boxing uppercase text-7xl'>MAYICHI</h3>
				</div>

				<img
					src='/street-fighter-vs-logo.webp'
					alt=''
					width='64'
					height='64'
					class='w-16 mx-auto absolute left-1/2 -translate-x-1/2'
				/>

				<div class='px-5 pt-4 pb-2 bg-white text-black text-center'>
					<h3 class='font-boxing uppercase text-7xl'>AMOURANTH</h3>
				</div>
			</div>
		</main>
	</body>
	<footer></footer>
</html>

<script>
	const $boxers = document.querySelector('#boxers')
	const $boxersImages = $boxers.querySelectorAll('img')

	const $info = document.getElementById('info') as HTMLElement
	const $combat = document.getElementById('combat') as HTMLElement

	$boxersImages.forEach(($img) => {
		$img.addEventListener('mouseleave', () => {
			$boxersImages.forEach(($img) => {
				$img.style.filter = 'none'
				$img.style.transition = 'all .3s ease-in-out'
				$img.style.scale = '1'
			})

			$info.style.opacity = '1'
			$info.style.visibility = 'visible'
			$info.style.transition = 'all .3s ease-in-out'

			$combat.style.opacity = '0'
			$combat.style.visibility = 'hidden'
			$combat.style.transition = 'all .3s ease-in-out'
		})

		$img.addEventListener('mouseenter', () => {
			const sectionImages = $img.parentNode.children
			const position = Array.from(sectionImages).indexOf($img)
			// get images from left side and right side
			const [leftBoxer, rightBoxer] = [
				$boxersImages[position], // left side
				$boxersImages[position + $boxersImages.length / 2] // right side
			]
			// Hide the information
			$info.style.opacity = '0'
			$info.style.visibility = 'hidden'
			$info.style.transition = 'all .3s ease-in-out'

			$combat.style.opacity = '1'
			$combat.style.visibility = 'visible'
			$combat.style.transition = 'all .3s ease-in-out'

			const [firstBoxerName, secondBoxerName] = $combat.querySelectorAll('h3')
			firstBoxerName.innerText = leftBoxer.alt
			secondBoxerName.innerText = rightBoxer.alt

			// hide rest of the boxers
			$boxersImages.forEach(($img) => {
				$img.style.filter = 'blur(2px) grayscale(.8)'
				$img.style.transition = 'all .3s ease-in-out'
			})

			leftBoxer.style.scale = '1.2'
			leftBoxer.style.filter = 'contrast(1.1)'
			leftBoxer.style.transition = 'all .3s ease-in-out'

			rightBoxer.style.scale = '1.2'
			rightBoxer.style.filter = 'contrast(1.1)'
			rightBoxer.style.transition = 'all .3s ease-in-out'
		})
	})
</script>
